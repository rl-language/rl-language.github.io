

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RLC &mdash; Rulebook documentation 0.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=e259d695"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Building RLC from sources" href="building.html" />
    <link rel="prev" title="Graphic engines and machine learning" href="project_rationale.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Rulebook documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Concepts:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="language_tour.html">Language Tour</a></li>
<li class="toctree-l1"><a class="reference internal" href="the_inversion_of_control_problem.html">Interactive Inversion of control</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_rationale.html">Graphic engines and machine learning</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">RLC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rlc-lsp-and-autocomplete">rlc-lsp and autocomplete</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vscode">VSCODE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vim-with-youcompleteme">VIM with YouCompleteMe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rlc-test">rlc-test</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rlc-random">rlc-random</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rlc-learn">rlc-learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rlc-play">rlc-play</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rlc-probs">rlc-probs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rlc-action">rlc-action</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tools-for-compiler-people">Tools for compiler people</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rlc-internals">RLC internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lexer">Lexer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parser">Parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unchecked-ast">Unchecked AST</a></li>
<li class="toctree-l3"><a class="reference internal" href="#typechecked-ast">Typechecked AST</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implicit-instantiation">Implicit instantiation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flattened">Flattened</a></li>
<li class="toctree-l3"><a class="reference internal" href="#action-rewriting">Action rewriting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lowering-to-llvm-ir">Lowering to LLVM IR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#making-ir-more-readable">Making IR more readable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mlir">MLIR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-single-rlc-passes">Running single RLC passes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building RLC from sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="interoperating.html">Interoperation with engines and languages</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reinforcement Learning Docs:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial for RL people</a></li>
<li class="toctree-l1"><a class="reference internal" href="gym_tutorial.html">RLC and GYM</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">UIs, Controllers, Gameplay:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ui_gameplay.html">UI, Controller, and Gameplay</a></li>
<li class="toctree-l1"><a class="reference internal" href="4hammer.html">4Hammer</a></li>
<li class="toctree-l1"><a class="reference internal" href="board_games.html">Board games</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="language-reference.html">Rulebook Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlib/index.html">stdlib</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rulebook documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">RLC</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/rlc.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rlc">
<h1>RLC<a class="headerlink" href="#rlc" title="Link to this heading"></a></h1>
<p>This document describes the architecture of <code class="docutils literal notranslate"><span class="pre">RLC</span></code>, the rulebook compiler, and of the other tools of the RLC suite. The intent is to provide a high level description of how the various parts of Rulebook fit into a product built on top of it, as well as a description of RLC command line facilities. More exhaustive descriptions of all tools can be found in the <a class="reference internal" href="language-reference.html"><span class="std std-doc">reference</span></a>.</p>
<p>RLC is a <a class="reference external" href="https://llvm.org">LLVM</a> based compiler, it ingest one or more rulebook files and various possible outputs depending on the user request.</p>
<div class="graphviz"><img src="_images/graphviz-af7e321713df6766eb45f70dd8af6c88d2777649.png" alt="digraph RLC_Compiler {
    /*––Layout––*/
    rankdir = LR;
    nodesep = 0.6;
    ranksep = 1;

    /*––Global node / edge styling––*/
    node [shape=box, style=filled, color=&quot;#dddddd&quot;,
          fontname=&quot;Helvetica&quot;, fontsize=10];
    edge [arrowsize=0.7];

    /*––Input &amp; compiler––*/
    rl_file [label=&quot;file.rl&quot;,
             shape=note, style=&quot;filled,rounded&quot;,
             color=&quot;#8ecae6&quot;, fontcolor=&quot;#0a3045&quot;];
    rlc     [label=&quot;rlc&quot;,
             shape=box3d, color=&quot;#219ebc&quot;, fontcolor=&quot;white&quot;];

    /*––Outputs, all kept on the same vertical line––*/
    subgraph cluster_outputs { rank=same;
        executable [label=&quot;Executable&quot;];
        shared     [label=&quot;Shared Library&quot;];
        static     [label=&quot;Static Library&quot;];
        header     [label=&quot;header.h&quot;];
        godot      [label=&quot;Godot-CPP Module&quot;];
        csharp     [label=&quot;C# Wrapper&quot;];
        python     [label=&quot;Python Wrapper&quot;];
    }

    /*––Edges––*/
    rl_file -&gt; rlc;

    rlc -&gt; executable;
    rlc -&gt; shared  ;
    rlc -&gt; static ;
    rlc -&gt; header;
    rlc -&gt; godot;
    rlc -&gt; csharp  ;
    rlc -&gt; python;
}" class="graphviz" /></div>
<p>RLC produces:</p>
<ul class="simple">
<li><p><strong>native executable</strong>, pretty much the same as the output of a c/cpp file compiled with clang.</p></li>
<li><p>native libraries to reuse in other languages.</p></li>
<li><p>a wrapper to use the library in that language.</p></li>
</ul>
<section id="rlc-lsp-and-autocomplete">
<h2>rlc-lsp and autocomplete<a class="headerlink" href="#rlc-lsp-and-autocomplete" title="Link to this heading"></a></h2>
<p>rlc-lsp is a <a class="reference external" href="https://en.wikipedia.org/wiki/Language_Server_Protocol">language server</a> for the Rulebook language. It allows users to get autocomplete in their ide.</p>
<p>Notice that rlc-lsp must be in PATH, so if you are using the PIP package of rulebook, you must start your editor from the shell that has already enabled the virtual environment that installed rl_language or rl_language_core.</p>
<section id="vscode">
<h3>VSCODE<a class="headerlink" href="#vscode" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">vscode</span></code> has a plugin available in the plugin store called <code class="docutils literal notranslate"><span class="pre">rl-lsp</span></code> and <code class="docutils literal notranslate"><span class="pre">rl-language</span></code> that enables autocomplete and syntax highlighting.</p>
</section>
<section id="vim-with-youcompleteme">
<h3>VIM with YouCompleteMe<a class="headerlink" href="#vim-with-youcompleteme" title="Link to this heading"></a></h3>
<p>On <code class="docutils literal notranslate"><span class="pre">vim</span></code>, if you use <code class="docutils literal notranslate"><span class="pre">YouCompleteMe</span></code> you can get access to automplete by adding the followings to your .vimrc file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">au</span> <span class="n">BufRead</span><span class="p">,</span><span class="n">BufNewFile</span> <span class="o">*.</span><span class="n">rl</span> <span class="nb">set</span> <span class="n">filetype</span><span class="o">=</span><span class="n">rl</span>

<span class="n">let</span> <span class="n">g</span><span class="p">:</span><span class="n">ycm_language_server</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span>
            \    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;rulebook&#39;</span><span class="p">,</span>
            \     <span class="s1">&#39;cmdline&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;rlc-lsp&#39;</span><span class="p">,</span> <span class="s1">&#39;--stdio&#39;</span> <span class="p">],</span>
            \     <span class="s1">&#39;filetypes&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;rl&#39;</span> <span class="p">]</span>
            \   <span class="p">}]</span>

</pre></div>
</div>
</section>
</section>
<section id="rlc-test">
<h2>rlc-test<a class="headerlink" href="#rlc-test" title="Link to this heading"></a></h2>
<p>rlc-test runs all functions with no arguments found in the input file that return a bool called test_* .</p>
<div class="highlight-rlc notranslate"><div class="highlight"><pre><span></span><span class="kn">fun</span> <span class="n">test_return_success</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nc">Bool</span><span class="p">:</span>
    <span class="kr">return</span> <span class="l">true</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rlc-test<span class="w"> </span>file.rl
</pre></div>
</div>
<p>This program is only available in a pip installation.</p>
</section>
<section id="rlc-random">
<h2>rlc-random<a class="headerlink" href="#rlc-random" title="Link to this heading"></a></h2>
<p>rlc-random runs random actions on a program with a finite amount of actions, and does until it reaches the end of the program. It prints the selected actions.</p>
<p>This tool is usefull as a command line utility to quickly test a interactive program, or to produce a trace usefull to some other program.</p>
<p>To be usable with rlc-random, a program just requires that to have a entry point with the following signature <code class="docutils literal notranslate"><span class="pre">act</span> <span class="pre">play()</span> <span class="pre">-&gt;</span> <span class="pre">Game</span></code>, and that all <code class="docutils literal notranslate"><span class="pre">action</span> <span class="pre">statements</span></code> that appear in <code class="docutils literal notranslate"><span class="pre">play</span></code> are enumerable.</p>
<p>This program is only available in a pip installation.</p>
</section>
<section id="rlc-learn">
<h2>rlc-learn<a class="headerlink" href="#rlc-learn" title="Link to this heading"></a></h2>
<p>rlc-learn uses a off-the-shelf implmentation of PPO to maximize some metric in a given Rulebook program. This tool is intended to be used to perform sanity checks by those that wish to roll out their own machine learning algorithm, or by those that do not have knowledge of reinforcement learning and wish to use a acceptable off-the-shelf implementation. A basic tutorial is shown <a class="reference internal" href="tutorial.html"><span class="std std-doc">here</span></a>.</p>
<p>This program is only available in a pip installation.</p>
</section>
<section id="rlc-play">
<h2>rlc-play<a class="headerlink" href="#rlc-play" title="Link to this heading"></a></h2>
<p>Given a Rulebook program file.rl, and the network obtained from <code class="docutils literal notranslate"><span class="pre">rlc-learn</span> <span class="pre">file.rl</span></code>, rlc-play generates a playout of that environment from start to finish according to the probabilities assigned by the network. A basic tutorial is shown <a class="reference internal" href="tutorial.html"><span class="std std-doc">here</span></a>.</p>
<p>This program is only available in a pip installation.</p>
</section>
<section id="rlc-probs">
<h2>rlc-probs<a class="headerlink" href="#rlc-probs" title="Link to this heading"></a></h2>
<p>rlc-probs uses the network generated by rlc-learn to display on screen the actions available to the network in a given state of the input interactive program, and their respective probabilities. This tool is intended to be use to inspect the decision making skills of a trained network, beside gaining more insight than observing a single decision at the time.</p>
<p>A basic tutorial is shown <a class="reference internal" href="tutorial.html"><span class="std std-doc">here</span></a>.</p>
<p>This program is only available in a pip installation.</p>
</section>
<section id="rlc-action">
<h2>rlc-action<a class="headerlink" href="#rlc-action" title="Link to this heading"></a></h2>
<p>Applies a execution trace to a rulebook program, and then prints the final result. This tool is usefull to check if a trace is valid, if the traced program is correct.</p>
<p>This program is only available in a pip installation.</p>
</section>
<section id="tools-for-compiler-people">
<h2>Tools for compiler people<a class="headerlink" href="#tools-for-compiler-people" title="Link to this heading"></a></h2>
<p>This section of the document talks about the internal components of RLC, and is meant for compiler developers, not users of the language. If you are confused about what this means and you are wondering if this section is for your, it is not, altough you can still read it if you are interested in knowing what goes on under rlc hood.</p>
</section>
<section id="rlc-internals">
<h2>RLC internals<a class="headerlink" href="#rlc-internals" title="Link to this heading"></a></h2>
<p>RLC is a <a class="reference external" href="https://llvm.org">LLVM</a> and <a class="reference external" href="https://mlir.llvm.org">MLIR</a> based compiler. It has a custom recursive descent parser, and a custom AST built on top of MLIR, called the RLC Dialect.</p>
<div class="graphviz"><img src="_images/graphviz-9a6be1fc809ecb1bbc57774bce5c92edb8b876d7.png" alt="digraph RLC_Pipeline_V {
    rankdir = TB;           /* vertical (top-to-bottom) layout          */
    nodesep = 0.6;
    ranksep = 1;
    dpi     = 100;          /* higher resolution                        */

    node [shape=box, style=filled, color=&quot;#dddddd&quot;,
          fontname=&quot;Helvetica&quot;, fontsize=11];
    edge [arrowsize=0.7];

    /* main pipeline */
    lexer                 [label=&quot;Lexer&quot;];
    parser                [label=&quot;Parser&quot;];
    unchecked_ast         [label=&quot;Unchecked AST&quot;];
    typechecked_ast       [label=&quot;Typechecked AST&quot;];
    implicit_instantiation[label=&quot;Implicit Instantiation&quot;];
    flattened             [label=&quot;Flattened&quot;];
    action_rewriting      [label=&quot;Action Rewriting&quot;];
    llvm_ir               [label=&quot;LLVM IR&quot;];
    file_a                [label=&quot;file.a&quot;];
    linker                [label=&quot;Linker&quot;];
    lib_so                [label=&quot;lib.so&quot;];

    /* auxiliary */
    libruntime [label=&quot;libruntime&quot;, shape=note,
                style=&quot;filled,rounded&quot;, color=&quot;#8ecae6&quot;,
                fontcolor=&quot;#0a3045&quot;];
    wrappers   [label=&quot;Wrappers&quot;];

    /* sequential flow */
    lexer  -&gt; parser
    parser -&gt; unchecked_ast
    unchecked_ast -&gt; typechecked_ast
    typechecked_ast -&gt; implicit_instantiation
    implicit_instantiation -&gt; flattened
    flattened -&gt; action_rewriting
    action_rewriting -&gt; llvm_ir
    llvm_ir -&gt; file_a
    file_a  -&gt; linker
    linker  -&gt; lib_so

    /* extra edges */
    libruntime -&gt; linker ;
    implicit_instantiation -&gt; wrappers;
}" class="graphviz" /></div>
<section id="lexer">
<h3>Lexer<a class="headerlink" href="#lexer" title="Link to this heading"></a></h3>
<p>The lexer of RLC takes the input file and turns them into token to be consumed by the parser. There is nothing fancy here except that since the language has semantical whitespaces, the lexer must keep track of the indentation.</p>
<p>You can see the token stream with <code class="docutils literal notranslate"><span class="pre">rlc</span> <span class="pre">--token</span> <span class="pre">file.rl</span></code></p>
</section>
<section id="parser">
<h3>Parser<a class="headerlink" href="#parser" title="Link to this heading"></a></h3>
<p>The parser is a recursive descent handwritten parser, the parser takes the tokens, and creates on the fly the unchecked AST.</p>
</section>
<section id="unchecked-ast">
<h3>Unchecked AST<a class="headerlink" href="#unchecked-ast" title="Link to this heading"></a></h3>
<p>Before typechecking the AST of the language is unchecked, it means that almost every non trivial operation is marked as having unkown type.</p>
<p>You can see the token stream with <code class="docutils literal notranslate"><span class="pre">rlc</span> <span class="pre">--unchecked</span> <span class="pre">file.rl</span></code></p>
</section>
<section id="typechecked-ast">
<h3>Typechecked AST<a class="headerlink" href="#typechecked-ast" title="Link to this heading"></a></h3>
<p>The typechecked IR knows all types of all expressions, except for templates, which have been typechecked, but are not expanded yet.</p>
<p>Ideally, all static errors in the input program should be discovered during typechecking. In practice this is true for every error except errors relating to <code class="docutils literal notranslate"><span class="pre">drop</span></code>, <code class="docutils literal notranslate"><span class="pre">init</span></code> and <code class="docutils literal notranslate"><span class="pre">assign</span></code> when they are used inside templates.</p>
<p>You can see the token stream with <code class="docutils literal notranslate"><span class="pre">rlc</span> <span class="pre">--type-checked</span> <span class="pre">file.rl</span></code></p>
</section>
<section id="implicit-instantiation">
<h3>Implicit instantiation<a class="headerlink" href="#implicit-instantiation" title="Link to this heading"></a></h3>
<p>During the implicit instantiation step templates end up being generated, and implicit init, drop and assign functions emitted.</p>
<p>After the implicit step, no object of the module can be a template, and all non external declared entities must have been discovered.</p>
<p>You can see the token stream with <code class="docutils literal notranslate"><span class="pre">rlc</span> <span class="pre">--after-implicit</span> <span class="pre">file.rl</span></code></p>
<p>Wrappers for other languages are emitted after this step, when all concrete functions are accounted for.</p>
</section>
<section id="flattened">
<h3>Flattened<a class="headerlink" href="#flattened" title="Link to this heading"></a></h3>
<p>During the flattening step all control flow constructs are removed and replaced with jumps.</p>
<p>You can see the token stream with <code class="docutils literal notranslate"><span class="pre">rlc</span> <span class="pre">--flattened</span> <span class="pre">file.rl</span></code></p>
</section>
<section id="action-rewriting">
<h3>Action rewriting<a class="headerlink" href="#action-rewriting" title="Link to this heading"></a></h3>
<p>During action rewriting all Action Functions <code class="docutils literal notranslate"><span class="pre">act</span> <span class="pre">$name()</span> <span class="pre">-&gt;</span> <span class="pre">$Type:</span></code> end up being replaced with the functions they declare. This includes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">$name()</span> <span class="pre">-&gt;</span> <span class="pre">$Type:</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">can_$name()</span> <span class="pre">-&gt;</span> <span class="pre">Bool:</span></code> if the action function <code class="docutils literal notranslate"><span class="pre">$name</span></code> has a precondition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">$act($Type,</span> <span class="pre">args...)</span></code> for each action statement called <code class="docutils literal notranslate"><span class="pre">$act</span></code> in <code class="docutils literal notranslate"><span class="pre">$name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">can_$act($Type,</span> <span class="pre">args...)</span> <span class="pre">-&gt;</span> <span class="pre">Bool</span></code> for each action statement called <code class="docutils literal notranslate"><span class="pre">$act</span></code> in <code class="docutils literal notranslate"><span class="pre">$name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">is_done($Type)</span> <span class="pre">-&gt;</span> <span class="pre">Bool</span></code></p></li>
</ul>
<p>After action rewrting the module contains only types and functions.</p>
</section>
<section id="lowering-to-llvm-ir">
<h3>Lowering to LLVM IR<a class="headerlink" href="#lowering-to-llvm-ir" title="Link to this heading"></a></h3>
<p>The module is translated to LLVM IR to be optimized and compiled.</p>
<p>You can see the token stream with <code class="docutils literal notranslate"><span class="pre">rlc</span> <span class="pre">--ir</span> <span class="pre">file.rl</span></code> to see the LLVM ir. You can use <code class="docutils literal notranslate"><span class="pre">rlc</span> <span class="pre">--ir</span> <span class="pre">file.rl</span> <span class="pre">-O2</span></code> if you want to see the optimized IR.</p>
</section>
<section id="making-ir-more-readable">
<h3>Making IR more readable<a class="headerlink" href="#making-ir-more-readable" title="Link to this heading"></a></h3>
<p>When priting the RLC IR you can pass <code class="docutils literal notranslate"><span class="pre">--hide-positions</span></code> and <code class="docutils literal notranslate"><span class="pre">--hide-dl</span></code> to omit the module data layout and the module debug positions. That makes the IR slightly more readable.</p>
</section>
<section id="mlir">
<h3>MLIR<a class="headerlink" href="#mlir" title="Link to this heading"></a></h3>
<p>I know you are looking for a explanation of how MLIR works since MLIR documentation is arcane. Good luck!</p>
<p>Once you figure it out: RLC uses MLIR as a mere intermediate rappresentation generator, and as a way to convert to LLVM IR. We use nothing about Dialect interoperability or tensorial stuff. Every MLIR operation we use(except when converting to LLVM IR) is custom made for RLC.</p>
<p>In practice what we get out MLIR is:</p>
<ul class="simple">
<li><p>the pipeline infrastructure</p></li>
<li><p>the declarative way of creating new operation types</p></li>
<li><p>the textual serializers for MLIR</p></li>
<li><p>mlir-opt which runs single passes of mlir</p></li>
<li><p>some basic type interfaces</p></li>
<li><p>MLIR dataflow analisys</p></li>
</ul>
</section>
<section id="running-single-rlc-passes">
<h3>Running single RLC passes<a class="headerlink" href="#running-single-rlc-passes" title="Link to this heading"></a></h3>
<p>If you want to run a RLC pass in isolation after a particular step of the rlc pipeline, say the typechecking step, you can run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rlc</span> <span class="o">--</span><span class="nb">type</span><span class="o">-</span><span class="n">checked</span> <span class="n">file</span><span class="o">.</span><span class="n">rl</span> <span class="o">-</span><span class="n">o</span> <span class="o">-</span> <span class="o">|</span> <span class="n">rlc</span><span class="o">-</span><span class="n">opt</span> <span class="o">--</span><span class="n">PASS_NAME</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="project_rationale.html" class="btn btn-neutral float-left" title="Graphic engines and machine learning" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="building.html" class="btn btn-neutral float-right" title="Building RLC from sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Massimo Fioravanti.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>